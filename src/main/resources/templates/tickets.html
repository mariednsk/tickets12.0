<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∏–ª–µ—Ç–∞–º–∏</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<div class="container">
    <div style="display:flex;justify-content:space-between;align-items:center;">
        <h1>üéüÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∏–ª–µ—Ç–∞–º–∏</h1>
        <div>
            <span sec:authorize="isAuthenticated()">–ü—Ä–∏–≤–µ—Ç, <b sec:authentication="name"></b></span>
            <form th:action="@{/logout}" method="post" style="display:inline" sec:authorize="isAuthenticated()">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                <button class="button" type="submit">–í—ã–π—Ç–∏</button>
            </form>
        </div>
    </div>

    <form th:action="@{/tickets/add}" th:object="${ticket}" method="post" class="add-form" sec:authorize="hasRole('ADMIN')">
        <input type="text" th:field="*{eventName}" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è" required>
        <input type="text" th:field="*{buyerName}" placeholder="–ò–º—è –ø–æ–∫—É–ø–∞—Ç–µ–ª—è" required>
        <input type="text" th:field="*{seatNumber}" placeholder="–ù–æ–º–µ—Ä –º–µ—Å—Ç–∞" required>
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
        <button type="submit" class="add-btn">–î–æ–±–∞–≤–∏—Ç—å –±–∏–ª–µ—Ç</button>
    </form>

    <table>
        <thead>
        <tr>
            <th>ID</th>
            <th>–°–æ–±—ã—Ç–∏–µ</th>
            <th>–ü–æ–∫—É–ø–∞—Ç–µ–ª—å</th>
            <th>–ú–µ—Å—Ç–æ</th>
            <th sec:authorize="hasRole('ADMIN')">–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="ticket : ${tickets}">
            <td th:text="${ticket.id}"></td>
            <td th:text="${ticket.eventName}"></td>
            <td th:text="${ticket.buyerName}"></td>
            <td th:text="${ticket.seatNumber}"></td>
            <td sec:authorize="hasRole('ADMIN')">
                <a th:href="@{'/tickets/edit/' + ${ticket.id}}" class="edit-btn">‚úèÔ∏è</a>
                <form th:action="@{'/tickets/delete/' + ${ticket.id}}" method="post" style="display:inline;">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                    <button type="submit" class="delete-btn" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –±–∏–ª–µ—Ç?')">üóëÔ∏è</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>

    <div style="text-align: center; margin-top: 25px;">
        <a th:href="@{/}" class="button">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
</div>
</body>
</html>



<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org" lang="ru">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∏–ª–µ—Ç–∞–º–∏</title>-->
<!--    <link rel="stylesheet" th:href="@{/css/style.css}">-->
<!--</head>-->
<!--<body>-->
<!--<div class="container">-->
<!--    <h1>üéüÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∏–ª–µ—Ç–∞–º–∏</h1>-->

<!--    <form th:action="@{/tickets/add}" th:object="${ticket}" method="post" class="add-form">-->
<!--        <input type="text" th:field="*{eventName}" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è" required>-->
<!--        <div th:if="${#fields.hasErrors('eventName')}" th:errors="*{eventName}" class="error"></div>-->

<!--        <input type="text" th:field="*{buyerName}" placeholder="–ò–º—è –ø–æ–∫—É–ø–∞—Ç–µ–ª—è" required>-->
<!--        <div th:if="${#fields.hasErrors('buyerName')}" th:errors="*{buyerName}" class="error"></div>-->

<!--        <input type="text" th:field="*{seatNumber}" placeholder="–ù–æ–º–µ—Ä –º–µ—Å—Ç–∞" required>-->
<!--        <div th:if="${#fields.hasErrors('seatNumber')}" th:errors="*{seatNumber}" class="error"></div>-->

<!--        <button type="submit" class="add-btn">–î–æ–±–∞–≤–∏—Ç—å –±–∏–ª–µ—Ç</button>-->
<!--    </form>-->

<!--    <table>-->
<!--        <thead>-->
<!--        <tr>-->
<!--            <th>ID</th>-->
<!--            <th>–°–æ–±—ã—Ç–∏–µ</th>-->
<!--            <th>–ü–æ–∫—É–ø–∞—Ç–µ–ª—å</th>-->
<!--            <th>–ú–µ—Å—Ç–æ</th>-->
<!--            <th>–î–µ–π—Å—Ç–≤–∏—è</th>-->
<!--        </tr>-->
<!--        </thead>-->
<!--        <tbody>-->
<!--        <tr th:each="ticket : ${tickets}">-->
<!--            <td th:text="${ticket.id}"></td>-->
<!--            <td th:text="${ticket.eventName}"></td>-->
<!--            <td th:text="${ticket.buyerName}"></td>-->
<!--            <td th:text="${ticket.seatNumber}"></td>-->
<!--            <td>-->
<!--                <a th:href="@{'/tickets/edit/' + ${ticket.id}}" class="edit-btn">‚úèÔ∏è</a>-->
<!--                <form th:action="@{'/tickets/delete/' + ${ticket.id}}" method="post" style="display:inline;">-->
<!--                    <button type="submit" class="delete-btn" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –±–∏–ª–µ—Ç?')">üóëÔ∏è</button>-->
<!--                </form>-->
<!--            </td>-->
<!--        </tr>-->
<!--        </tbody>-->
<!--    </table>-->

<!--    <div style="text-align: center; margin-top: 25px;">-->
<!--        <a th:href="@{/}" class="button">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>-->
<!--    </div>-->
<!--</div>-->
<!--</body>-->
<!--</html>-->
